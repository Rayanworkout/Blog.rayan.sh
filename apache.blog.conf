<VirtualHost *:80>
    ServerName blog.rayan.sh
    ServerAdmin webmaster@localhost

    # VueJS Frontend
    DocumentRoot /var/www/html/blog/frontend/dist
    <Directory /var/www/html/blog/frontend/dist>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    ErrorLog ${APACHE_LOG_DIR}/frontend_error.log
    CustomLog ${APACHE_LOG_DIR}/frontend_access.log combined

    # Django Backend
    Alias /api/v1/static /var/www/html/blog/backend/static
    <Directory /var/www/html/blog/backend/static>
        Require all granted
    </Directory>
    <Directory /var/www/html/blog/backend/blog>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>
    WSGIScriptAlias /api/v1 /var/www/html/blog/backend/blog/wsgi.py
    WSGIDaemonProcess myproject python-path=/var/www/html/blog/backend python-home=/var/www/html/blog/backend/.venv
    WSGIProcessGroup myproject
    ErrorLog ${APACHE_LOG_DIR}/backend_error.log
    CustomLog ${APACHE_LOG_DIR}/backend_access.log combined
</VirtualHost>
